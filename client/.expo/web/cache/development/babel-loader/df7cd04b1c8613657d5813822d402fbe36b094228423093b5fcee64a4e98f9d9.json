{"ast":null,"code":"import React, { createContext, useContext, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login as loginAction, register as registerAction, logout as logoutAction, fetchCurrentUser, selectUser, selectIsLoading, selectError } from '../slices/authSlice';\nconst AuthContext = createContext({\n  login: async () => {},\n  register: async () => {},\n  logout: async () => {},\n  user: null,\n  isLoading: false,\n  error: null\n});\nexport function AuthProvider({\n  children\n}) {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n  const isLoading = useSelector(selectIsLoading);\n  const error = useSelector(selectError);\n  useEffect(() => {\n    dispatch(fetchCurrentUser());\n  }, [dispatch]);\n  const login = async credentials => {\n    await dispatch(loginAction(credentials)).unwrap();\n  };\n  const register = async data => {\n    await dispatch(registerAction(data)).unwrap();\n  };\n  const logout = async () => {\n    await dispatch(logoutAction()).unwrap();\n  };\n  const contextValue = {\n    login,\n    register,\n    logout,\n    user,\n    isLoading,\n    error\n  };\n  return React.createElement(AuthContext.Provider, {\n    value: contextValue\n  }, children);\n}\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  return context;\n}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useDispatch","useSelector","login","loginAction","register","registerAction","logout","logoutAction","fetchCurrentUser","selectUser","selectIsLoading","selectError","AuthContext","user","isLoading","error","AuthProvider","children","dispatch","credentials","unwrap","data","contextValue","createElement","Provider","value","useAuth","context"],"sources":["D:/All_Projects/Koach-Reader/client/src/hooks/useAuth.ts"],"sourcesContent":["import React, { createContext, ReactNode, useContext, useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { \n  login as loginAction, \n  register as registerAction, \n  logout as logoutAction,\n  fetchCurrentUser,\n  selectUser,\n  selectIsLoading,\n  selectError\n} from '../slices/authSlice';\nimport { AppDispatch } from '../store';\n\ninterface LoginCredentials {\n  username: string;\n  password: string;\n}\n\ninterface RegisterData {\n  username: string;\n  email: string;\n  password: string;\n}\n\nexport interface AuthUser {\n  id: number;\n  username: string;\n  email: string;\n  isPremium: boolean;\n  koachPoints: number;\n  readingStreak: number;\n  preferences?: any;\n  createdAt: string;\n}\n\ninterface AuthContextType {\n  login: (credentials: LoginCredentials) => Promise<void>;\n  register: (data: RegisterData) => Promise<void>;\n  logout: () => Promise<void>;\n  user: AuthUser | null;\n  isLoading: boolean;\n  error: string | null;\n}\n\n// Create the context with a default value\nconst AuthContext = createContext<AuthContextType>({\n  login: async () => {},\n  register: async () => {},\n  logout: async () => {},\n  user: null,\n  isLoading: false,\n  error: null\n});\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const dispatch = useDispatch<AppDispatch>();\n  const user = useSelector(selectUser);\n  const isLoading = useSelector(selectIsLoading);\n  const error = useSelector(selectError);\n\n  useEffect(() => {\n    // Load user data on mount\n    dispatch(fetchCurrentUser());\n  }, [dispatch]);\n\n  const login = async (credentials: LoginCredentials) => {\n    await dispatch(loginAction(credentials)).unwrap();\n  };\n\n  const register = async (data: RegisterData) => {\n    await dispatch(registerAction(data)).unwrap();\n  };\n\n  const logout = async () => {\n    await dispatch(logoutAction()).unwrap();\n  };\n\n  const contextValue: AuthContextType = {\n    login,\n    register,\n    logout,\n    user,\n    isLoading,\n    error,\n  };\n\n  // Return the context provider with children\n  return React.createElement(\n    AuthContext.Provider,\n    { value: contextValue },\n    children\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  return context;\n}"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAaC,UAAU,EAAYC,SAAS,QAAQ,OAAO;AACxF,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SACEC,KAAK,IAAIC,WAAW,EACpBC,QAAQ,IAAIC,cAAc,EAC1BC,MAAM,IAAIC,YAAY,EACtBC,gBAAgB,EAChBC,UAAU,EACVC,eAAe,EACfC,WAAW,QACN,qBAAqB;AAmC5B,MAAMC,WAAW,GAAGf,aAAa,CAAkB;EACjDK,KAAK,EAAE,MAAAA,CAAA,KAAY,CAAC,CAAC;EACrBE,QAAQ,EAAE,MAAAA,CAAA,KAAY,CAAC,CAAC;EACxBE,MAAM,EAAE,MAAAA,CAAA,KAAY,CAAC,CAAC;EACtBO,IAAI,EAAE,IAAI;EACVC,SAAS,EAAE,KAAK;EAChBC,KAAK,EAAE;AACT,CAAC,CAAC;AAEF,OAAO,SAASC,YAAYA,CAAC;EAAEC;AAAkC,CAAC,EAAE;EAClE,MAAMC,QAAQ,GAAGlB,WAAW,CAAc,CAAC;EAC3C,MAAMa,IAAI,GAAGZ,WAAW,CAACQ,UAAU,CAAC;EACpC,MAAMK,SAAS,GAAGb,WAAW,CAACS,eAAe,CAAC;EAC9C,MAAMK,KAAK,GAAGd,WAAW,CAACU,WAAW,CAAC;EAEtCZ,SAAS,CAAC,MAAM;IAEdmB,QAAQ,CAACV,gBAAgB,CAAC,CAAC,CAAC;EAC9B,CAAC,EAAE,CAACU,QAAQ,CAAC,CAAC;EAEd,MAAMhB,KAAK,GAAG,MAAOiB,WAA6B,IAAK;IACrD,MAAMD,QAAQ,CAACf,WAAW,CAACgB,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;EACnD,CAAC;EAED,MAAMhB,QAAQ,GAAG,MAAOiB,IAAkB,IAAK;IAC7C,MAAMH,QAAQ,CAACb,cAAc,CAACgB,IAAI,CAAC,CAAC,CAACD,MAAM,CAAC,CAAC;EAC/C,CAAC;EAED,MAAMd,MAAM,GAAG,MAAAA,CAAA,KAAY;IACzB,MAAMY,QAAQ,CAACX,YAAY,CAAC,CAAC,CAAC,CAACa,MAAM,CAAC,CAAC;EACzC,CAAC;EAED,MAAME,YAA6B,GAAG;IACpCpB,KAAK;IACLE,QAAQ;IACRE,MAAM;IACNO,IAAI;IACJC,SAAS;IACTC;EACF,CAAC;EAGD,OAAOnB,KAAK,CAAC2B,aAAa,CACxBX,WAAW,CAACY,QAAQ,EACpB;IAAEC,KAAK,EAAEH;EAAa,CAAC,EACvBL,QACF,CAAC;AACH;AAEA,OAAO,SAASS,OAAOA,CAAA,EAAG;EACxB,MAAMC,OAAO,GAAG7B,UAAU,CAACc,WAAW,CAAC;EACvC,OAAOe,OAAO;AAChB","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}